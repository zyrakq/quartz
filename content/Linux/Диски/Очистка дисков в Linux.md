---
tags:
  - inbox
  - linux/disks
categories:
  - dd
  - disks
  - mount
  - ssd
  - hdd
  - cd-card
created: 2025-01-04T10:37:25+03:00
modified: 2025-01-04T11:22:57+03:00
publish: true
sr-due: 2025-01-07
sr-interval: 3
sr-ease: 250
---
### Быстрая очистка

Для быстрой очистки диска достаточно удалить таблицу gpt. Это происходит автоматически при записи нового образа на диск. Также это можно выполнить с помощью следующей команды:

```sh
sudo shred -vfz -n 1 -t /dev/<sdX>
```

где `<sdX>` - диск с которого требуется удалить таблицу разделов.

Рекомендуется для ssd. Но если требуется, чтобы данные не могли быть восстановлены, то можно выполнить полную очистку случайными данными (см. ниже).

### Полная очистка

#### Затирание случайными данными

Полная очистка нулями не рекомендуется для ssd, так как затирание данных нулями приводит к уменьшению срока службы диска. Но можно затереть диск случайными данными:

```sh
sudo dd if=/dev/urandom of=/dev/sdX bs=64k status=progress conv=fdatasync
```

или

```sh
sudo shred -vfz -n 3 /dev/<sdX>
```

Это тоже уменьшит срок службы диска, но уже менее значительно.

Для остальных типов дисков лучше использовать затирание данных нулями для большей надежности, существенно на срок службы это не повлияет.

#### Затирание данных нулями

Для HDD:

```sh
sudo dd if=/dev/zero of=/dev/<sdX> bs=4M status=progress conv=fdatasync
```

> [!faq] 
>  Флаг `conv=fdatasync` гарантирует, что все данные будут синхронизированы на диске перед продолжением операции. Для HDD это особенно важно, так как они работают с механическими головками и физическим перемещением данных.

Для CD-карт:

```sh
sudo dd if=/dev/zero of=/dev/cdrw bs=2048 conv=notrunc status=progress
```

> [!faq] 
>  Флаг `conv=notrunc` предотвращает обрезку (truncation) файла во время записи. Этот флаг гарантирует, что вся записываемая информация будет сохранена полностью, без обрезки. Он особенно полезен при работе с образами ISO или при создании пользовательских CD/DVD.